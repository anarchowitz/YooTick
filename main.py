import disnake, datetime, logging, os
from disnake.ext import commands
from database import Database
from tickets import setuptickets
from commands import setupcommands
from fastcommands import setupfastcommands

intents = disnake.Intents.default() 
intents.message_content = True
version = "3.4.3.3"
bot = commands.Bot(command_prefix="/", intents=intents, activity=disnake.Activity(type=disnake.ActivityType.listening, name=f"yooma.su | v{version}"))

db = Database("database.db")


@bot.event
async def on_ready():
    os.system('cls')
    print(f"{bot.user} –∑–∞–ø—É—â–µ–Ω\n –í–µ—Ä—Å–∏—è: {version}\n –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {len(bot.users)}\n –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞: {datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n_________________")
    db.create_settings_table()
    db.create_price_list_table()
    db.create_staff_list_table()
    db.create_created_tickets_table()
    db.create_date_stats_table()
    db.create_fast_commands_table()
    db.create_banned_users_table()
    if not db.cursor.execute("SELECT 1 FROM fast_commands LIMIT 1").fetchone():
        default_commands = [
            ('—Å–∫–∏–Ω—Ä–µ–π–≤', '–§–æ—Ä–º–∞ –≤—ã–¥–∞—á–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞ —Å–∫–∏–Ω—Ä–µ–π–≤–µ', '–ß—Ç–æ –±—ã –º—ã –≤–∞–º –ø–æ–º–æ–≥–ª–∏, —É—Ç–æ—á–Ω–∏—Ç–µ.\n1) –ö–∞–∫ –¥–∞–≤–Ω–æ –≤—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞ SkinRave?\n2) –ê–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å –ª–∏ –≤—ã –ø–æ–¥ —Å–≤–æ–∏–º Steam –∞–∫–∫–∞—É–Ω—Ç–æ–º?\n3) –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ —Å–∞–π—Ç–µ (yooma.su)\n4) –°–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞ SkinRave. \n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('–∞–¥–º–∏–Ω—á–∞—Ç', '–§–æ—Ä–º–∞ –æ –∫—Ä–∞—Ç–∫–æ–º –≥–∞–π–¥–µ –ø–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω—á–∞—Ç –∫—Å2', '–ß—Ç–æ–±—ã –Ω–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω-—á–∞—Ç.\n1) –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç –≤ –∏–≥—Ä–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–ª–∞–≤–∏—à–∞ "U").\n2) –ù–∞—á–Ω–∏—Ç–µ —Å–≤–æ—ë —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Å–∏–º–≤–æ–ª–∞ @\n–ù–∞–ø—Ä–∏–º–µ—Ä: @–ü—Ä–∏–≤–µ—Ç \n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('—Å—Å—ã–ª–∫–∞—Å–∞–π—Ç', '–§–æ—Ä–º–∞ –æ –∫—Ä–∞—Ç–∫–æ–º –≥–∞–π–¥–µ –ø–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ª–∏—á–Ω–æ–π —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å —Å–∞–π—Ç–∞', '–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à –ø—Ä–æ—Ñ–∏–ª—å –Ω–∞ —Å–∞–π—Ç–µ, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:\n1) –°–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Å–≤–æ–π –Ω–∏–∫ –∏ –∞–≤–∞—Ç–∞—Ä–∫—É (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–ø—Ä–∞–≤–∞ –æ—Ç –±–∞–ª–∞–Ω—Å–∞).\n2) –í –ø–æ—è–≤–∏–≤—à–µ–º—Å—è –º–µ–Ω—é –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å".\n3) –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. \n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('–æ–±–Ω–æ–≤–∞', '–§–æ—Ä–º–∞ –æ —Ç–æ–º, —á—Ç–æ –≤—ã—à–ª–∞ –æ–±–Ω–æ–≤–∞ –≤ –∫—Å –∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã', '–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ CS2 —Å–ª–æ–º–∞–ª–æ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–µ—Ä–æ–≤. –ù—É–∂–Ω–æ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∏ –±–∞–≥–∏. –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ üíï \n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('–∂–∞–ª–æ–±–∞', '–§–æ—Ä–º–∞ –æ —Ç–æ–º, —á—Ç–æ –∂–∞–ª–æ–±–∞ –ø–µ—Ä–µ–¥–∞–Ω–∞ –≤ –∞–¥–º–∏–Ω —á–∞—Ç', '–°–ø–∞—Å–∏–±–æ! –ü–µ—Ä–µ–¥–∞–ª–∏ –≤–∞—à–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏! \n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('–±–∞–≥', '–§–æ—Ä–º–∞ –æ —Ç–æ–º, —á—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–≥–µ - –ø–µ—Ä–µ–¥–∞–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É', '–°–ø–∞—Å–∏–±–æ! –ü–µ—Ä–µ–¥–∞–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É! \n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('–∫–æ–∏–Ω—ã', '–§–æ—Ä–º–∞ –æ —Ç–æ–º, —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –∫–æ–∏–Ω–∞–º–∏', '–ö–æ–∏–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π\n–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∏—Ö –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É !shop –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–µ—Ä–µ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞\n\n–ó–∞ –∫–æ–∏–Ω—ã –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–æ–∫—É–ø–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞—è—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏.\n[–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∏–º–∏ –ø–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Å—ã–ª–∫–µ](https://yooma.su/ru/rules) \n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('—Å–æ—Ü—Å–µ—Ç–∏', '–§–æ—Ä–º–∞ –æ –Ω–∞—à–∏—Ö —Å–æ—Ü—Å–µ—Ç—è—Ö', '–í—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–∞—à–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–æ—Ü. —Å–µ—Ç–∏:\n\nDiscord: <https://ds.yooma.su>\nTelegram: <https://t.me/yoomasu>\n–í–ö–æ–Ω—Ç–∞–∫—Ç–µ: <https://vk.com/yoomasu>\n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('–ø—Ä–æ–º–æ–≤–≤–æ–¥', '–§–æ—Ä–º–∞ –æ —Ç–æ–º, –∫–∞–∫ –≤–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–æ–∫–æ–¥.', '–ß—Ç–æ–±—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥, –≤–∞–º –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ —Å–≤–æ—é –∞–≤–∞—Ç–∞—Ä–∫—É –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É —Å–∞–π—Ç–∞ –∏ –≤—ã–±—Ä–∞—Ç—å "–≤–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–æ–∫–æ–¥".\n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('–±–ª–µ–∫–¥–∂–µ–∫', '–§–æ—Ä–º–∞ –æ —Ç–æ–º, –∫–∞–∫ –∏–≥—Ä–∞—Ç—å –≤ –±–ª–µ–∫–¥–∂–µ–∫.', '–ß—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä—É, –≤–∞–º –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—É !bj –≤ —á–∞—Ç –∏–≥—Ä—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\n–ü–æc–ª–µ —ç—Ç–æ–≥–æ –≤ —á–∞—Ç–µ –ø–æ—è–≤–∏—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä—É. –í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–¥–µ–ª–∏—Ç—å –µ–µ –º—ã—à–∫–æ–π –∏ –Ω–∞–∂–∞—Ç—å –ü–ö–ú, –∑–∞—Ç–µ–º "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç".\n–î–∞–ª–µ–µ –∑–∞–π—Ç–∏ –≤ –æ–±—ã—á–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä (–∏–ª–∏ –≤ Steam –±—Ä–∞—É–∑–µ—Ä) –∏ –≤–≤–µ—Å—Ç–∏ —ç—Ç—É —Å—Å—ã–ª–∫—É —Ç—É–¥–∞, –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∏–≥—Ä–∞\n\n-# –û—Ç–ø—Ä–∞–≤–∏–ª - {author}'),
            ('—Å–∫–∏–Ω—ã', '–§–æ—Ä–º–∞ –æ —Ç–æ–º, –∫–∞–∫ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Å–∫–∏–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.', '–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–∏–Ω–æ–≤ –Ω–∞ –Ω–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ, –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤:\n\n1) –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ —Å–≤–æ–π —Å—Ç–∏–º –ø—Ä–æ—Ñ–∏–ª—å –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ.\n2) –í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è.\n3) –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª —Å–∫–∏–Ω—á–µ–Ω–¥–∂–µ—Ä, —Ç—É—Ç –≤—ã –∫–∞–∫ —Ä–∞–∑ –∏ –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∫–∏–Ω—ã –Ω–∞ –≤—Å–µ –æ—Ä—É–∂–∏—è!\n\n–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∫–∏–Ω—á–µ–Ω–¥–∂–µ—Ä–∞ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å –≤–∏–ø-–ø—Ä–∏–≤–∏–ª–µ–≥–∏—è–º–∏.\n–ü–æ–¥—Ä–æ–±–Ω–µ–µ —É–∑–Ω–∞–≤–∞–π—Ç–µ –∑–¥–µ—Å—å: https://yooma.su/ru/shop/0'),
            ('–∑–∞—è–≤–∫–∞–º–æ–¥–µ—Ä', '–§–æ—Ä–º–∞ –æ —Ç–æ–º, –∫–∞–∫ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞.', '–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞, –≤–∞–º –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:\n1) –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ —á–µ—Ä–µ–∑ —Å–≤–æ–π —Å—Ç–∏–º –ø—Ä–æ—Ñ–∏–ª—å.\n2) –í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è.\n3) –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª –º–æ–¥–µ—Ä–∞—Ü–∏—è, –≥–¥–µ –∏ —Å–º–æ–∂–µ—Ç–µ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞.\n\n–ï—Å–ª–∏ –≤—ã —É–∂–µ —è–≤–ª—è–µ—Ç–µ—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —Ç–æ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ: "–∑–∞—è–≤–∫–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞".\n\n–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–º:\n1) –í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ –º–ª–∞–¥—à–µ 16 –ª–µ—Ç.\n2) –ù–∞ –≤–∞—à–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞–∏–≥—Ä–∞–Ω–æ –Ω–µ –º–µ–Ω–µ–µ 50 —á–∞—Å–æ–≤.')   
        ]
        db.cursor.executemany(
            "INSERT INTO fast_commands (command_name, description, response) VALUES (?, ?, ?)",
            default_commands
        )
        db.conn.commit()
        print("–ò–º–ø–æ—Ä—Ç–µ–¥ –¥–µ—Ñ–∞—É–ª—Ç —Ñ–∞—Å—Ç –∫–æ–º–º–∞–Ω–¥—Å –µ–ø—Ç–∞")

if __name__ == "__main__":
    logger = logging.getLogger('bot')
    logger.setLevel(logging.ERROR)
    logger.disabled = False # True or False
    logging.basicConfig(
        format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
        handlers=[
            logging.FileHandler('yoologger.log', encoding='cp1251'), # encoding='utf-8' (if u run from your pc) | encoding='cp1251' (if u run from vps)
            logging.StreamHandler()
        ]
    )
    setuptickets(bot)
    setupcommands(bot)
    setupfastcommands(bot)
    with open('yootoken.txt', 'r') as file:
        token = file.read().strip()
    bot.run(token)